<%- include('partials/header.html') %>

<main class="container-lg mh py-4">
	<div class="d-flex justify-content-start">
		<a class="btn btn-back d-flex justify-content-between align-items-center" href="/admin/">
			<img src="/img/regresar.svg">
			Regresar
		</a>
		<h1 class="text-start mb-0 ms-2">Administrar productos</h1>
	</div>
	<form class="mt-3 border border-3 p-3 rounded bg-white" id="form">
		<div class="scrollable">
			<table id="results" class="table table-light table-hover table-bordered mt-2 mb-0 align-middle">
				<thead>
					<tr>
						<th scope="col" width="5%" class="text-center">Código</th>
						<th scope="col" width="30%" class="text-center">Nombre</th>
						<th scope="col" width="30%" class="text-center">Descripción</th>
						<th scope="col" width="15%" class="text-center">Precio</th>
						<th scope="col" width="15%" class="text-center">Imagen</th>
						<th scope="col" width="5%" class="text-center">Disponibles</th>
						<th scope="col" width="5%" class="text-center">Categoria</th>
						<th scope="col" width="5%" class="text-center">Acciones</th>
					</tr>
				</thead>
				<tbody>
					<% products.forEach(element=> { %>
					<tr>
						<th class="text-center" scope="row">
							<%= element.codigo %>
						</th>
						<td class="text-center">
							<%= element.nombre %>
						</td>
						<td class="text-center">
							<%= element.descripcion %>
						</td>
						<td class="text-center">$<%= element.precio %>
						</td>
						<td class="text-center p-0"><img class="w-100" src="http://res.cloudinary.com/dzlemvbvt/image/upload/w_120,h_120,c_fill,q_90/<%= element.urlImagen %>" alt="Imagen de <%= element.nombre %>" /></td>
						<td class="text-center">
							<%= element.disponibilidad %>
						</td>
						<td class="text-center">
							<%= element.categoria %>
						</td>
						<td class="d-flex justify-content-center align-items-center gap-2">
							<% if (element.estado === 1) { %>
							<a href="/admin/productos/delete/<%= element.codigo %>" class="btn btn-primary">
								<img src="/img/activado.svg" alt="Icono de activado">
							</a>
							<% } else { %>
							<a href="/admin/productos/delete/<%= element.codigo %>" class="btn btn-danger">
								<img src="/img/desactivado.svg" alt="Icono de desactivado">
							</a>
							<% } %>
							<a href="/admin/productos/update/<%= element.codigo %>" class="btn btn-dark">
								<img src="/img/editar.svg" alt="Icono de editar">
							</a>
						</td>
					</tr>
					<% }); %>
				</tbody>
			</table>
		</div>
	</form>

	<div class="modal fade" id="alertModal" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="alertTitle">Modal title</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<p id="alertMessage">Modal body text goes here.</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
				</div>
			</div>
		</div>
	</div>
</main>

<%- include('partials/footer.html') %>